Return-Path: <freedreno-bounces@lists.freedesktop.org>
X-Original-To: lists+freedreno@lfdr.de
Delivered-To: lists+freedreno@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 15D8D64AE5
	for <lists+freedreno@lfdr.de>; Wed, 10 Jul 2019 18:45:43 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D1F706E0FC;
	Wed, 10 Jul 2019 16:45:41 +0000 (UTC)
X-Original-To: freedreno@lists.freedesktop.org
Delivered-To: freedreno@lists.freedesktop.org
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by gabe.freedesktop.org (Postfix) with ESMTP id A973A6E0FC
 for <freedreno@lists.freedesktop.org>; Wed, 10 Jul 2019 16:45:40 +0000 (UTC)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 4C288344;
 Wed, 10 Jul 2019 09:45:40 -0700 (PDT)
Received: from [10.1.197.57] (e110467-lin.cambridge.arm.com [10.1.197.57])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 5ED083F246;
 Wed, 10 Jul 2019 09:45:38 -0700 (PDT)
To: Jordan Crouse <jcrouse@codeaurora.org>, freedreno@lists.freedesktop.org
References: <1562612447-19856-1-git-send-email-jcrouse@codeaurora.org>
 <1562612447-19856-3-git-send-email-jcrouse@codeaurora.org>
From: Robin Murphy <robin.murphy@arm.com>
Message-ID: <d9c1a115-ca4f-efda-4ba2-adefbd802849@arm.com>
Date: Wed, 10 Jul 2019 17:45:37 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.6.1
MIME-Version: 1.0
In-Reply-To: <1562612447-19856-3-git-send-email-jcrouse@codeaurora.org>
Content-Language: en-GB
Subject: Re: [Freedreno] [RESEND PATCH v2 2/3] iommu/io-pgtable-arm: Add
 support for AARCH64 split pagetables
X-BeenThere: freedreno@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: Freedreno graphics driver community testing & development
 <freedreno.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/freedreno>,
 <mailto:freedreno-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/freedreno>
List-Post: <mailto:freedreno@lists.freedesktop.org>
List-Help: <mailto:freedreno-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/freedreno>,
 <mailto:freedreno-request@lists.freedesktop.org?subject=subscribe>
Cc: Rob Herring <robh@kernel.org>, jean-philippe.brucker@arm.com,
 linux-arm-msm@vger.kernel.org, Joerg Roedel <joro@8bytes.org>,
 dianders@chromium.org, linux-kernel@vger.kernel.org,
 iommu@lists.linux-foundation.org, hoegsberg@google.com,
 linux-arm-kernel@lists.infradead.org, Zhen Lei <thunder.leizhen@huawei.com>,
 Will Deacon <will@kernel.org>, Alyssa Rosenzweig <alyssa@rosenzweig.io>,
 baolu.lu@linux.intel.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: freedreno-bounces@lists.freedesktop.org
Sender: "Freedreno" <freedreno-bounces@lists.freedesktop.org>

SGkgSm9yZGFuLAoKT24gMDgvMDcvMjAxOSAyMDowMCwgSm9yZGFuIENyb3VzZSB3cm90ZToKPiBB
ZGQgYSBuZXcgc3ViLWZvcm1hdCBBUk1fNjRfTFBBRV9TUExJVF9TMSB0byBjcmVhdGUgYW5kIHNl
dCB1cCBzcGxpdAo+IHBhZ2V0YWJsZXMgKFRUQlIwIGFuZCBUVEJSMSkuIFRoZSBpbml0aWFsaXph
dGlvbiBmdW5jdGlvbiBzZXRzIHVwIHRoZQo+IGNvcnJlY3QgdmFfc2l6ZSBhbmQgc2lnbiBleHRl
bnNpb24gYml0cyBhbmQgcHJvZ3JhbXMgdGhlIFRDUiByZWdpc3RlcnMuCj4gU3BsaXQgcGFnZXRh
YmxlIGZvcm1hdHMgdXNlIHRoZWlyIG93biBvd24gbWFwL3VubWFwIHdyYXBwZXJzIHRvIGVuc3Vy
ZQo+IHRoYXQgdGhlIGNvcnJlY3QgcGFnZXRhYmxlIGlzIHNlbGVjdGVkIGJhc2VkIG9uIHRoZSBp
bmNvbWluZyBpb3ZhIGJ1dAo+IG1vc3Qgb2YgdGhlIGhlYXZ5IGxpZnRpbmcgaXMgY29tbW9uIHRv
IHRoZSBvdGhlciBmb3JtYXRzLgoKSSdtIHNvbWV3aGF0IGNvbmNlcm5lZCB0aGF0IHRoaXMgaW1w
bGVtZW50YXRpb24gaXMgdmVyeSBjbG9zZWx5IHRpZWQgdG8gCnRoZSBjdXJyZW50IEFkcmVubyB1
c2UtY2FzZSwgYW5kIHdvbid0IGVhc2lseSBnZW5lcmFsaXNlIGluIGZ1dHVyZSB0byAKb3RoZXIg
cG90ZW50aWFsIFRUQlIxIHVzZXMgd2hpY2ggaGF2ZSBiZWVuIHRvc3NlZCBhcm91bmQsIGxpa2Ug
ClNNTVV2My13aXRob3V0LXN1YnN0cmVhbS1JRC4KCkZ1cnRoZXJtb3JlLCBldmVuIGZvciB0aGUg
QWRyZW5vIHByZXRlbmQtUEFTSUQgY2FzZSBpdCBhcHBlYXJzIHRvIGJlIGEgCmJpdCB0b28gZnJh
Z2lsZSBmb3IgY29tZm9ydCAtIGdpdmVuIHRoYXQgYSBET01BSU5fQVRUUl9TUExJVF9UQUJMRVMg
CmRvbWFpbiBkb2Vzbid0IGxvb2sgYW55IGRpZmZlcmVudCBmcm9tIGEgcmVndWxhciBvbmUgZnJv
bSB0aGUgdXNlcnMnIApwb2ludCBvZiB2aWV3LCB3aGF0J3MgdG8gc3RvcCB0aGVtIG1ha2luZyAi
d2l0aG91dCBQQVNJRCIgbWFwcGluZ3MgaW4gCnRoZSBsb3dlciBoYWxmIG9mIHRoZSBhZGRyZXNz
IHNwYWNlLCBhbmQgdGh1cyB1bndpdHRpbmdseSBwdWxsaW5nIHRoZSAKcnVnIG91dCBmcm9tIHVu
ZGVyIHRoZWlyIG93biBmZWV0IHVwb24gYXR0YWNoaW5nIGFuIGF1eCBkb21haW4/IEluIGZhY3Qg
CmFsbG9jYXRpbmcgYSBUVEJSMCB0YWJsZSBhdCBhbGwgZm9yIHRoZSBtYWluIGRvbWFpbiBzZWVt
cyBsaWtlIGxpdHRsZSAKbW9yZSB0aGFuIGEgd2FzdGUgb2YgbWVtb3J5LgoKPiAKPiBTaWduZWQt
b2ZmLWJ5OiBKb3JkYW4gQ3JvdXNlIDxqY3JvdXNlQGNvZGVhdXJvcmEub3JnPgo+IC0tLQo+IAo+
ICAgZHJpdmVycy9pb21tdS9pby1wZ3RhYmxlLWFybS5jIHwgMjYxICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKystLS0tCj4gICBkcml2ZXJzL2lvbW11L2lvLXBndGFibGUuYyAg
ICAgfCAgIDEgKwo+ICAgaW5jbHVkZS9saW51eC9pby1wZ3RhYmxlLmggICAgIHwgICAyICsKPiAg
IDMgZmlsZXMgY2hhbmdlZCwgMjQwIGluc2VydGlvbnMoKyksIDI0IGRlbGV0aW9ucygtKQo+IAo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL2lvbW11L2lvLXBndGFibGUtYXJtLmMgYi9kcml2ZXJzL2lv
bW11L2lvLXBndGFibGUtYXJtLmMKPiBpbmRleCAxNjFhN2Q1Ni4uYWVjMzVlNSAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL2lvbW11L2lvLXBndGFibGUtYXJtLmMKPiArKysgYi9kcml2ZXJzL2lvbW11
L2lvLXBndGFibGUtYXJtLmMKPiBAQCAtMTE4LDcgKzExOCwxMiBAQAo+ICAgI2RlZmluZSBBUk1f
TFBBRV9UQ1JfVEcwXzY0SwkJKDEgPDwgMTQpCj4gICAjZGVmaW5lIEFSTV9MUEFFX1RDUl9URzBf
MTZLCQkoMiA8PCAxNCkKPiAgIAo+ICsjZGVmaW5lIEFSTV9MUEFFX1RDUl9URzFfNEsJCSgwIDw8
IDMwKQo+ICsjZGVmaW5lIEFSTV9MUEFFX1RDUl9URzFfNjRLCQkoMSA8PCAzMCkKPiArI2RlZmlu
ZSBBUk1fTFBBRV9UQ1JfVEcxXzE2SwkJKDIgPDwgMzApCj4gKwo+ICAgI2RlZmluZSBBUk1fTFBB
RV9UQ1JfU0gwX1NISUZUCQkxMgo+ICsjZGVmaW5lIEFSTV9MUEFFX1RDUl9TSDFfU0hJRlQJCTI4
Cj4gICAjZGVmaW5lIEFSTV9MUEFFX1RDUl9TSDBfTUFTSwkJMHgzCj4gICAjZGVmaW5lIEFSTV9M
UEFFX1RDUl9TSF9OUwkJMAo+ICAgI2RlZmluZSBBUk1fTFBBRV9UQ1JfU0hfT1MJCTIKPiBAQCAt
MTI2LDYgKzEzMSw4IEBACj4gICAKPiAgICNkZWZpbmUgQVJNX0xQQUVfVENSX09SR04wX1NISUZU
CTEwCj4gICAjZGVmaW5lIEFSTV9MUEFFX1RDUl9JUkdOMF9TSElGVAk4Cj4gKyNkZWZpbmUgQVJN
X0xQQUVfVENSX09SR04xX1NISUZUCTI2Cj4gKyNkZWZpbmUgQVJNX0xQQUVfVENSX0lSR04xX1NI
SUZUCTI0Cj4gICAjZGVmaW5lIEFSTV9MUEFFX1RDUl9SR05fTUFTSwkJMHgzCj4gICAjZGVmaW5l
IEFSTV9MUEFFX1RDUl9SR05fTkMJCTAKPiAgICNkZWZpbmUgQVJNX0xQQUVfVENSX1JHTl9XQldB
CQkxCj4gQEAgLTEzNiw2ICsxNDMsNyBAQAo+ICAgI2RlZmluZSBBUk1fTFBBRV9UQ1JfU0wwX01B
U0sJCTB4Mwo+ICAgCj4gICAjZGVmaW5lIEFSTV9MUEFFX1RDUl9UMFNaX1NISUZUCQkwCj4gKyNk
ZWZpbmUgQVJNX0xQQUVfVENSX1QxU1pfU0hJRlQJCTE2Cj4gICAjZGVmaW5lIEFSTV9MUEFFX1RD
Ul9TWl9NQVNLCQkweGYKPiAgIAo+ICAgI2RlZmluZSBBUk1fTFBBRV9UQ1JfUFNfU0hJRlQJCTE2
Cj4gQEAgLTE1Miw2ICsxNjAsMTQgQEAKPiAgICNkZWZpbmUgQVJNX0xQQUVfVENSX1BTXzQ4X0JJ
VAkJMHg1VUxMCj4gICAjZGVmaW5lIEFSTV9MUEFFX1RDUl9QU181Ml9CSVQJCTB4NlVMTAo+ICAg
Cj4gKyNkZWZpbmUgQVJNX0xQQUVfVENSX1NFUF9TSElGVAkJNDcKPiArI2RlZmluZSBBUk1fTFBB
RV9UQ1JfU0VQXzMxCQkoMHgwVUxMIDw8IEFSTV9MUEFFX1RDUl9TRVBfU0hJRlQpCj4gKyNkZWZp
bmUgQVJNX0xQQUVfVENSX1NFUF8zNQkJKDB4MVVMTCA8PCBBUk1fTFBBRV9UQ1JfU0VQX1NISUZU
KQo+ICsjZGVmaW5lIEFSTV9MUEFFX1RDUl9TRVBfMzkJCSgweDJVTEwgPDwgQVJNX0xQQUVfVENS
X1NFUF9TSElGVCkKPiArI2RlZmluZSBBUk1fTFBBRV9UQ1JfU0VQXzQxCQkoMHgzVUxMIDw8IEFS
TV9MUEFFX1RDUl9TRVBfU0hJRlQpCj4gKyNkZWZpbmUgQVJNX0xQQUVfVENSX1NFUF80MwkJKDB4
NFVMTCA8PCBBUk1fTFBBRV9UQ1JfU0VQX1NISUZUKQo+ICsjZGVmaW5lIEFSTV9MUEFFX1RDUl9T
RVBfVVBTVFJFQU0JKDB4N1VMTCA8PCBBUk1fTFBBRV9UQ1JfU0VQX1NISUZUKQoKVGhpcyBpcyBh
IHNwZWNpZmljIGRldGFpbCBvZiBTTU1VdjIsIGFuZCBub3RoaW5nIHRvIGRvIHdpdGggdGhlIApM
UEFFL0FBcmNoNjQgVk1TQSBmb3JtYXRzLgoKPiArCj4gICAjZGVmaW5lIEFSTV9MUEFFX01BSVJf
QVRUUl9TSElGVChuKQkoKG4pIDw8IDMpCj4gICAjZGVmaW5lIEFSTV9MUEFFX01BSVJfQVRUUl9N
QVNLCQkweGZmCj4gICAjZGVmaW5lIEFSTV9MUEFFX01BSVJfQVRUUl9ERVZJQ0UJMHgwNAo+IEBA
IC0xNzksMTEgKzE5NSwxMiBAQCBzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSB7Cj4gICAJc3Ry
dWN0IGlvX3BndGFibGUJaW9wOwo+ICAgCj4gICAJaW50CQkJbGV2ZWxzOwo+ICsJdTMyCQkJc2Vw
Owo+ICAgCXNpemVfdAkJCXBnZF9zaXplOwo+ICAgCXVuc2lnbmVkIGxvbmcJCXBnX3NoaWZ0Owo+
ICAgCXVuc2lnbmVkIGxvbmcJCWJpdHNfcGVyX2xldmVsOwo+ICAgCj4gLQl2b2lkCQkJKnBnZDsK
PiArCXZvaWQJCQkqcGdkWzJdOwo+ICAgfTsKPiAgIAo+ICAgdHlwZWRlZiB1NjQgYXJtX2xwYWVf
aW9wdGU7Cj4gQEAgLTQyNiw3ICs0NDMsOCBAQCBzdGF0aWMgYXJtX2xwYWVfaW9wdGUgYXJtX2xw
YWVfcHJvdF90b19wdGUoc3RydWN0IGFybV9scGFlX2lvX3BndGFibGUgKmRhdGEsCj4gICAJYXJt
X2xwYWVfaW9wdGUgcHRlOwo+ICAgCj4gICAJaWYgKGRhdGEtPmlvcC5mbXQgPT0gQVJNXzY0X0xQ
QUVfUzEgfHwKPiAtCSAgICBkYXRhLT5pb3AuZm10ID09IEFSTV8zMl9MUEFFX1MxKSB7Cj4gKwkg
ICAgZGF0YS0+aW9wLmZtdCA9PSBBUk1fMzJfTFBBRV9TMSB8fAo+ICsJICAgIGRhdGEtPmlvcC5m
bXQgPT0gQVJNXzY0X0xQQUVfU1BMSVRfUzEpIHsKPiAgIAkJcHRlID0gQVJNX0xQQUVfUFRFX25H
Owo+ICAgCQlpZiAoIShwcm90ICYgSU9NTVVfV1JJVEUpICYmIChwcm90ICYgSU9NTVVfUkVBRCkp
Cj4gICAJCQlwdGUgfD0gQVJNX0xQQUVfUFRFX0FQX1JET05MWTsKPiBAQCAtNDcwLDExICs0ODgs
MTAgQEAgc3RhdGljIGFybV9scGFlX2lvcHRlIGFybV9scGFlX3Byb3RfdG9fcHRlKHN0cnVjdCBh
cm1fbHBhZV9pb19wZ3RhYmxlICpkYXRhLAo+ICAgCXJldHVybiBwdGU7Cj4gICB9Cj4gICAKPiAt
c3RhdGljIGludCBhcm1fbHBhZV9tYXAoc3RydWN0IGlvX3BndGFibGVfb3BzICpvcHMsIHVuc2ln
bmVkIGxvbmcgaW92YSwKPiAtCQkJcGh5c19hZGRyX3QgcGFkZHIsIHNpemVfdCBzaXplLCBpbnQg
aW9tbXVfcHJvdCkKPiArc3RhdGljIGludCBfYXJtX2xwYWVfbWFwKHN0cnVjdCBhcm1fbHBhZV9p
b19wZ3RhYmxlICpkYXRhLCB1bnNpZ25lZCBsb25nIGlvdmEsCj4gKwkJCXBoeXNfYWRkcl90IHBh
ZGRyLCBzaXplX3Qgc2l6ZSwgaW50IGlvbW11X3Byb3QsCj4gKwkJCWFybV9scGFlX2lvcHRlICpw
dGVwKQo+ICAgewo+IC0Jc3RydWN0IGFybV9scGFlX2lvX3BndGFibGUgKmRhdGEgPSBpb19wZ3Rh
YmxlX29wc190b19kYXRhKG9wcyk7Cj4gLQlhcm1fbHBhZV9pb3B0ZSAqcHRlcCA9IGRhdGEtPnBn
ZDsKPiAgIAlpbnQgcmV0LCBsdmwgPSBBUk1fTFBBRV9TVEFSVF9MVkwoZGF0YSk7Cj4gICAJYXJt
X2xwYWVfaW9wdGUgcHJvdDsKPiAgIAo+IEBAIC00OTcsMTIgKzUxNCwzOSBAQCBzdGF0aWMgaW50
IGFybV9scGFlX21hcChzdHJ1Y3QgaW9fcGd0YWJsZV9vcHMgKm9wcywgdW5zaWduZWQgbG9uZyBp
b3ZhLAo+ICAgCXJldHVybiByZXQ7Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCBhcm1fbHBhZV9z
cGxpdF9tYXAoc3RydWN0IGlvX3BndGFibGVfb3BzICpvcHMsIHVuc2lnbmVkIGxvbmcgaW92YSwK
PiArCQlwaHlzX2FkZHJfdCBwYWRkciwgc2l6ZV90IHNpemUsIGludCBpb21tdV9wcm90KQo+ICt7
Cj4gKwlzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YSA9IGlvX3BndGFibGVfb3BzX3Rv
X2RhdGEob3BzKTsKPiArCXVuc2lnbmVkIGxvbmcgbWFzayA9IDFVTCA8PCBkYXRhLT5zZXA7Cj4g
Kwlhcm1fbHBhZV9pb3B0ZSAqcHRlcDsKPiArCj4gKwlpZiAoaW92YSAmIG1hc2spIHsKPiArCQlw
dGVwID0gZGF0YS0+cGdkWzFdOwo+ICsJCWlvdmEgJj0gKG1hc2sgLSAxKTsKPiArCX0gZWxzZQo+
ICsJCXB0ZXAgPSBkYXRhLT5wZ2RbMF07CgpBRkFJQ1MsIHRoaXMgbG9naWMgZWZmZWN0aXZlbHkg
YWxpYXNlcyB0aGUgVFRCUjEgcmVnaW9uIGFjcm9zcyB0aGUgCmVudGlyZSB1cHBlciBoYWxmIG9m
IHRoZSBhZGRyZXNzIGhvbGUsIHNvIGJvZ3VzIElPVkFzIG1heSBjb3JydXB0IHZhbGlkIAptYXBw
aW5ncyBpbnN0ZWFkIG9mIGdpdmluZyBlcnJvcnMgYXMgZXhwZWN0ZWQuCgo+ICsKPiArCXJldHVy
biBfYXJtX2xwYWVfbWFwKGRhdGEsIGlvdmEsIHBhZGRyLCBzaXplLCBpb21tdV9wcm90LCBwdGVw
KTsKPiArfQo+ICsKPiArc3RhdGljIGludCBhcm1fbHBhZV9tYXAoc3RydWN0IGlvX3BndGFibGVf
b3BzICpvcHMsIHVuc2lnbmVkIGxvbmcgaW92YSwKPiArCQkJcGh5c19hZGRyX3QgcGFkZHIsIHNp
emVfdCBzaXplLCBpbnQgaW9tbXVfcHJvdCkKPiArewo+ICsJc3RydWN0IGFybV9scGFlX2lvX3Bn
dGFibGUgKmRhdGEgPSBpb19wZ3RhYmxlX29wc190b19kYXRhKG9wcyk7Cj4gKwo+ICsJcmV0dXJu
IF9hcm1fbHBhZV9tYXAoZGF0YSwgaW92YSwgcGFkZHIsIHNpemUsIGlvbW11X3Byb3QsIGRhdGEt
PnBnZFswXSk7Cj4gK30KPiArCj4gICBzdGF0aWMgdm9pZCBfX2FybV9scGFlX2ZyZWVfcGd0YWJs
ZShzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YSwgaW50IGx2bCwKPiAgIAkJCQkgICAg
YXJtX2xwYWVfaW9wdGUgKnB0ZXApCj4gICB7Cj4gICAJYXJtX2xwYWVfaW9wdGUgKnN0YXJ0LCAq
ZW5kOwo+ICAgCXVuc2lnbmVkIGxvbmcgdGFibGVfc2l6ZTsKPiAgIAo+ICsJaWYgKCFwdGVwKQo+
ICsJCXJldHVybjsKPiArCj4gICAJaWYgKGx2bCA9PSBBUk1fTFBBRV9TVEFSVF9MVkwoZGF0YSkp
Cj4gICAJCXRhYmxlX3NpemUgPSBkYXRhLT5wZ2Rfc2l6ZTsKPiAgIAllbHNlCj4gQEAgLTUzMiw3
ICs1NzYsOCBAQCBzdGF0aWMgdm9pZCBhcm1fbHBhZV9mcmVlX3BndGFibGUoc3RydWN0IGlvX3Bn
dGFibGUgKmlvcCkKPiAgIHsKPiAgIAlzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YSA9
IGlvX3BndGFibGVfdG9fZGF0YShpb3ApOwo+ICAgCj4gLQlfX2FybV9scGFlX2ZyZWVfcGd0YWJs
ZShkYXRhLCBBUk1fTFBBRV9TVEFSVF9MVkwoZGF0YSksIGRhdGEtPnBnZCk7Cj4gKwlfX2FybV9s
cGFlX2ZyZWVfcGd0YWJsZShkYXRhLCBBUk1fTFBBRV9TVEFSVF9MVkwoZGF0YSksIGRhdGEtPnBn
ZFswXSk7Cj4gKwlfX2FybV9scGFlX2ZyZWVfcGd0YWJsZShkYXRhLCBBUk1fTFBBRV9TVEFSVF9M
VkwoZGF0YSksIGRhdGEtPnBnZFsxXSk7Cj4gICAJa2ZyZWUoZGF0YSk7Cj4gICB9Cj4gICAKPiBA
QCAtNjQzLDExICs2ODgsMjggQEAgc3RhdGljIHNpemVfdCBfX2FybV9scGFlX3VubWFwKHN0cnVj
dCBhcm1fbHBhZV9pb19wZ3RhYmxlICpkYXRhLAo+ICAgCXJldHVybiBfX2FybV9scGFlX3VubWFw
KGRhdGEsIGlvdmEsIHNpemUsIGx2bCArIDEsIHB0ZXApOwo+ICAgfQo+ICAgCj4gK3N0YXRpYyBz
aXplX3QgYXJtX2xwYWVfc3BsaXRfdW5tYXAoc3RydWN0IGlvX3BndGFibGVfb3BzICpvcHMsCj4g
KwkJCQkgICB1bnNpZ25lZCBsb25nIGlvdmEsIHNpemVfdCBzaXplKQo+ICt7Cj4gKwlzdHJ1Y3Qg
YXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YSA9IGlvX3BndGFibGVfb3BzX3RvX2RhdGEob3BzKTsK
PiArCXVuc2lnbmVkIGxvbmcgbWFzayA9IDFVTCA8PCBkYXRhLT5zZXA7Cj4gKwlhcm1fbHBhZV9p
b3B0ZSAqcHRlcDsKPiArCWludCBsdmwgPSBBUk1fTFBBRV9TVEFSVF9MVkwoZGF0YSk7Cj4gKwo+
ICsJaWYgKGlvdmEgJiBtYXNrKSB7Cj4gKwkJcHRlcCA9IGRhdGEtPnBnZFsxXTsKPiArCQlpb3Zh
ICY9IChtYXNrIC0gMSk7Cj4gKwl9IGVsc2UKPiArCQlwdGVwID0gZGF0YS0+cGdkWzBdOwo+ICsK
PiArCXJldHVybiBfX2FybV9scGFlX3VubWFwKGRhdGEsIGlvdmEsIHNpemUsIGx2bCwgcHRlcCk7
Cj4gK30KPiArCj4gICBzdGF0aWMgc2l6ZV90IGFybV9scGFlX3VubWFwKHN0cnVjdCBpb19wZ3Rh
YmxlX29wcyAqb3BzLCB1bnNpZ25lZCBsb25nIGlvdmEsCj4gICAJCQkgICAgIHNpemVfdCBzaXpl
KQo+ICAgewo+ICAgCXN0cnVjdCBhcm1fbHBhZV9pb19wZ3RhYmxlICpkYXRhID0gaW9fcGd0YWJs
ZV9vcHNfdG9fZGF0YShvcHMpOwo+IC0JYXJtX2xwYWVfaW9wdGUgKnB0ZXAgPSBkYXRhLT5wZ2Q7
Cj4gKwlhcm1fbHBhZV9pb3B0ZSAqcHRlcCA9IGRhdGEtPnBnZFswXTsKPiAgIAlpbnQgbHZsID0g
QVJNX0xQQUVfU1RBUlRfTFZMKGRhdGEpOwo+ICAgCj4gICAJaWYgKFdBUk5fT04oaW92YSA+PSAo
MVVMTCA8PCBkYXRhLT5pb3AuY2ZnLmlhcykpKQo+IEBAIC02NTYsMTEgKzcxOCwxMSBAQCBzdGF0
aWMgc2l6ZV90IGFybV9scGFlX3VubWFwKHN0cnVjdCBpb19wZ3RhYmxlX29wcyAqb3BzLCB1bnNp
Z25lZCBsb25nIGlvdmEsCj4gICAJcmV0dXJuIF9fYXJtX2xwYWVfdW5tYXAoZGF0YSwgaW92YSwg
c2l6ZSwgbHZsLCBwdGVwKTsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgcGh5c19hZGRyX3QgYXJtX2xw
YWVfaW92YV90b19waHlzKHN0cnVjdCBpb19wZ3RhYmxlX29wcyAqb3BzLAo+IC0JCQkJCSB1bnNp
Z25lZCBsb25nIGlvdmEpCj4gK3N0YXRpYyBwaHlzX2FkZHJfdCBfYXJtX2xwYWVfaW92YV90b19w
aHlzKHN0cnVjdCBhcm1fbHBhZV9pb19wZ3RhYmxlICpkYXRhLAo+ICsJCQkJCSAgdW5zaWduZWQg
bG9uZyBpb3ZhLAo+ICsJCQkJCSAgYXJtX2xwYWVfaW9wdGUgKnB0ZXApCj4gICB7Cj4gLQlzdHJ1
Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YSA9IGlvX3BndGFibGVfb3BzX3RvX2RhdGEob3Bz
KTsKPiAtCWFybV9scGFlX2lvcHRlIHB0ZSwgKnB0ZXAgPSBkYXRhLT5wZ2Q7Cj4gKwlhcm1fbHBh
ZV9pb3B0ZSBwdGU7Cj4gICAJaW50IGx2bCA9IEFSTV9MUEFFX1NUQVJUX0xWTChkYXRhKTsKPiAg
IAo+ICAgCWRvIHsKPiBAQCAtNjkyLDYgKzc1NCwzMSBAQCBzdGF0aWMgcGh5c19hZGRyX3QgYXJt
X2xwYWVfaW92YV90b19waHlzKHN0cnVjdCBpb19wZ3RhYmxlX29wcyAqb3BzLAo+ICAgCXJldHVy
biBpb3B0ZV90b19wYWRkcihwdGUsIGRhdGEpIHwgaW92YTsKPiAgIH0KPiAgIAo+ICsKPiArc3Rh
dGljIHBoeXNfYWRkcl90IGFybV9scGFlX3NwbGl0X2lvdmFfdG9fcGh5cyhzdHJ1Y3QgaW9fcGd0
YWJsZV9vcHMgKm9wcywKPiArCQkJCQkgICAgICAgdW5zaWduZWQgbG9uZyBpb3ZhKQo+ICt7Cj4g
KwlzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YSA9IGlvX3BndGFibGVfb3BzX3RvX2Rh
dGEob3BzKTsKPiArCXVuc2lnbmVkIGxvbmcgbWFzayA9IDFVTCA8PCBkYXRhLT5zZXA7Cj4gKwlh
cm1fbHBhZV9pb3B0ZSAqcHRlcDsKPiArCj4gKwlpZiAoaW92YSAmIG1hc2spIHsKPiArCQlwdGVw
ID0gZGF0YS0+cGdkWzFdOwo+ICsJCWlvdmEgJj0gKG1hc2sgLSAxKTsKPiArCX0gZWxzZQo+ICsJ
CXB0ZXAgPSBkYXRhLT5wZ2RbMF07Cj4gKwo+ICsJcmV0dXJuIF9hcm1fbHBhZV9pb3ZhX3RvX3Bo
eXMoZGF0YSwgaW92YSwgcHRlcCk7Cj4gK30KPiArCj4gK3N0YXRpYyBwaHlzX2FkZHJfdCBhcm1f
bHBhZV9pb3ZhX3RvX3BoeXMoc3RydWN0IGlvX3BndGFibGVfb3BzICpvcHMsCj4gKwkJCQkJIHVu
c2lnbmVkIGxvbmcgaW92YSkKPiArewo+ICsJc3RydWN0IGFybV9scGFlX2lvX3BndGFibGUgKmRh
dGEgPSBpb19wZ3RhYmxlX29wc190b19kYXRhKG9wcyk7Cj4gKwo+ICsJcmV0dXJuIF9hcm1fbHBh
ZV9pb3ZhX3RvX3BoeXMoZGF0YSwgaW92YSwgZGF0YS0+cGdkWzBdKTsKPiArfQo+ICsKPiAgIHN0
YXRpYyB2b2lkIGFybV9scGFlX3Jlc3RyaWN0X3Bnc2l6ZXMoc3RydWN0IGlvX3BndGFibGVfY2Zn
ICpjZmcpCj4gICB7Cj4gICAJdW5zaWduZWQgbG9uZyBncmFudWxlLCBwYWdlX3NpemVzOwo+IEBA
IC03NzEsNiArODU4LDkgQEAgYXJtX2xwYWVfYWxsb2NfcGd0YWJsZShzdHJ1Y3QgaW9fcGd0YWJs
ZV9jZmcgKmNmZykKPiAgIAlwZ2RfYml0cyA9IHZhX2JpdHMgLSAoZGF0YS0+Yml0c19wZXJfbGV2
ZWwgKiAoZGF0YS0+bGV2ZWxzIC0gMSkpOwo+ICAgCWRhdGEtPnBnZF9zaXplID0gMVVMIDw8IChw
Z2RfYml0cyArIGlsb2cyKHNpemVvZihhcm1fbHBhZV9pb3B0ZSkpKTsKPiAgIAo+ICsJZGF0YS0+
cGdkWzBdID0gTlVMTDsKPiArCWRhdGEtPnBnZFsxXSA9IE5VTEw7Cj4gKwo+ICAgCWRhdGEtPmlv
cC5vcHMgPSAoc3RydWN0IGlvX3BndGFibGVfb3BzKSB7Cj4gICAJCS5tYXAJCT0gYXJtX2xwYWVf
bWFwLAo+ICAgCQkudW5tYXAJCT0gYXJtX2xwYWVfdW5tYXAsCj4gQEAgLTc4MCw4ICs4NzAsOCBA
QCBhcm1fbHBhZV9hbGxvY19wZ3RhYmxlKHN0cnVjdCBpb19wZ3RhYmxlX2NmZyAqY2ZnKQo+ICAg
CXJldHVybiBkYXRhOwo+ICAgfQo+ICAgCj4gLXN0YXRpYyBzdHJ1Y3QgaW9fcGd0YWJsZSAqCj4g
LWFybV82NF9scGFlX2FsbG9jX3BndGFibGVfczEoc3RydWN0IGlvX3BndGFibGVfY2ZnICpjZmcs
IHZvaWQgKmNvb2tpZSkKPiArc3RhdGljIHN0cnVjdCBhcm1fbHBhZV9pb19wZ3RhYmxlICoKPiAr
X2FybV82NF9scGFlX2FsbG9jX3BndGFibGVfczEoc3RydWN0IGlvX3BndGFibGVfY2ZnICpjZmcp
Cj4gICB7Cj4gICAJdTY0IHJlZzsKPiAgIAlzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0
YTsKPiBAQCAtODQ1LDggKzkzNSw2IEBAIGFybV82NF9scGFlX2FsbG9jX3BndGFibGVfczEoc3Ry
dWN0IGlvX3BndGFibGVfY2ZnICpjZmcsIHZvaWQgKmNvb2tpZSkKPiAgIAo+ICAgCXJlZyB8PSAo
NjRVTEwgLSBjZmctPmlhcykgPDwgQVJNX0xQQUVfVENSX1QwU1pfU0hJRlQ7Cj4gICAKPiAtCS8q
IERpc2FibGUgc3BlY3VsYXRpdmUgd2Fsa3MgdGhyb3VnaCBUVEJSMSAqLwo+IC0JcmVnIHw9IEFS
TV9MUEFFX1RDUl9FUEQxOwoKTm90IHNldHRpbmcgRVBEMSBhdCBhbGwgY291bGQgcG90ZW50aWFs
bHkgbGVhZCB0byBwcm9ibGVtcyBmb3Igc3lzdGVtcyAKbm90IHVzaW5nIHNwbGl0IHRhYmxlcy4K
Cj4gICAJY2ZnLT5hcm1fbHBhZV9zMV9jZmcudGNyID0gcmVnOwo+ICAgCj4gICAJLyogTUFJUnMg
Ki8KPiBAQCAtODYzLDI0ICs5NTEsMTQzIEBAIGFybV82NF9scGFlX2FsbG9jX3BndGFibGVfczEo
c3RydWN0IGlvX3BndGFibGVfY2ZnICpjZmcsIHZvaWQgKmNvb2tpZSkKPiAgIAljZmctPmFybV9s
cGFlX3MxX2NmZy5tYWlyWzFdID0gMDsKPiAgIAo+ICAgCS8qIExvb2tpbmcgZ29vZDsgYWxsb2Nh
dGUgYSBwZ2QgKi8KPiAtCWRhdGEtPnBnZCA9IF9fYXJtX2xwYWVfYWxsb2NfcGFnZXMoZGF0YS0+
cGdkX3NpemUsIEdGUF9LRVJORUwsIGNmZyk7Cj4gLQlpZiAoIWRhdGEtPnBnZCkKPiArCWRhdGEt
PnBnZFswXSA9IF9fYXJtX2xwYWVfYWxsb2NfcGFnZXMoZGF0YS0+cGdkX3NpemUsIEdGUF9LRVJO
RUwsIGNmZyk7Cj4gKwlpZiAoIWRhdGEtPnBnZFswXSkKPiAgIAkJZ290byBvdXRfZnJlZV9kYXRh
Owo+ICAgCj4gICAJLyogRW5zdXJlIHRoZSBlbXB0eSBwZ2QgaXMgdmlzaWJsZSBiZWZvcmUgYW55
IGFjdHVhbCBUVEJSIHdyaXRlICovCj4gICAJd21iKCk7Cj4gICAKPiAgIAkvKiBUVEJScyAqLwo+
IC0JY2ZnLT5hcm1fbHBhZV9zMV9jZmcudHRiclswXSA9IHZpcnRfdG9fcGh5cyhkYXRhLT5wZ2Qp
Owo+ICsJY2ZnLT5hcm1fbHBhZV9zMV9jZmcudHRiclswXSA9IHZpcnRfdG9fcGh5cyhkYXRhLT5w
Z2RbMF0pOwo+ICAgCWNmZy0+YXJtX2xwYWVfczFfY2ZnLnR0YnJbMV0gPSAwOwo+ICsJcmV0dXJu
IGRhdGE7Cj4gKwo+ICtvdXRfZnJlZV9kYXRhOgo+ICsJa2ZyZWUoZGF0YSk7Cj4gKwlyZXR1cm4g
TlVMTDsKPiArfQo+ICsKPiArCj4gKy8qIEFsbG9jYXRlIHNwbGl0IHBhZ2V0YWJsZXMgKi8KPiAr
c3RhdGljIHN0cnVjdCBpb19wZ3RhYmxlICoKPiArYXJtXzY0X2xwYWVfYWxsb2NfcGd0YWJsZV9z
cGxpdF9zMShzdHJ1Y3QgaW9fcGd0YWJsZV9jZmcgKmNmZywgdm9pZCAqY29va2llKQo+ICt7Cj4g
Kwl1NjQgcmVnOwo+ICsJc3RydWN0IGFybV9scGFlX2lvX3BndGFibGUgKmRhdGE7Cj4gKwl1MzIg
c2VwOwo+ICsKPiArCS8qIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc2lnbiBleHRlbnNpb24gYml0IHNo
b3VsZCBiZSAqLwo+ICsJc3dpdGNoIChjZmctPmlhcykgewoKSUFTIG9ubHkgdGVsbHMgeW91IGhv
dyB3aWRlIHRoZSBTTU1VJ3MgYWRkcmVzcyBpbnB1dCBpczsgd2hhdCB5b3UgcmVhbGx5IApjYXJl
IGFib3V0IGZvciBzaWduIGV4dGVuc2lvbiBpcyBob3cgd2lkZSB0aGUgcmVsZXZhbnQgbWFzdGVy
cycgYWRkcmVzcyAKKm91dHB1dHMqIGFyZS4gVGhlcmUncyBubyB3YXkgd2UgY2FuIGtub3cgdGhh
dCBoZXJlLCBzbyBBRkFJQ1MgdGhlIG9ubHkgCnRydWx5IHJvYnVzdCBhbnN3ZXIgaXMgZm9yIHRo
ZSBjYWxsZXIgcmVxdWVzdGluZyBzcGxpdCB0YWJsZXMgdG8gYWxzbyAKcHJvdmlkZSB0aGUgYXBw
cm9wcmlhdGUgc3BsaXQgcG9pbnQuCgo+ICsJY2FzZSAzMjoKPiArCWNhc2UgMzY6Cj4gKwljYXNl
IDQwOgo+ICsJY2FzZSA0MjoKPiArCWNhc2UgNDQ6Cj4gKwkJc2VwID0gY2ZnLT5pYXMgLSAxOwo+
ICsJCS8qIEFkanVzdCB0aGUgYWRkcmVzcyBzaXplIHRvIGFjY291bnQgZm9yIHRoZSBleHRlbnNp
b24gYml0ICovCj4gKwkJY2ZnLT5pYXMtLTsKPiArCQlicmVhazsKPiArCWNhc2UgNDg6Cj4gKwkJ
LyogSUFTIG9mIDQ4IGlzIGEgc3BlY2lhbCBjYXNlLCBpdCBoYXMgYSBkZWRpY2F0ZWQgYml0ICov
CgpUaGF0J3Mgbm90IG9ubHkgbm90IFZNU0EsIGJ1dCBub3QgZXZlbiBhbnkgYXJjaGl0ZWN0ZWQg
U01NVSBiZWhhdmlvdXI7IAppdCBqdXN0IGhhcHBlbnMgdG8gYmUgdGhlIHdheSB0aGF0IG9uZSB1
c2VyIG9mIGlvLXBndGFibGUtYXJtIGN1cnJlbnRseSAKbWFuZ2xlcyBpdHMgSUFTIHZhbHVlcy4K
ClJvYmluLgoKPiArCQlzZXAgPSA0ODsKPiArCQlicmVhazsKPiArCWRlZmF1bHQ6Cj4gKwkJcmV0
dXJuIE5VTEw7Cj4gKwl9Cj4gKwo+ICsJZGF0YSA9IF9hcm1fNjRfbHBhZV9hbGxvY19wZ3RhYmxl
X3MxKGNmZyk7Cj4gKwlpZiAoIWRhdGEpCj4gKwkJcmV0dXJuIE5VTEw7Cj4gKwo+ICsJLyogQWRk
IHRoZSBUVEJSMSBzZXR0aW5ncyAqLwo+ICsJcmVnID0gY2ZnLT5hcm1fbHBhZV9zMV9jZmcudGNy
Owo+ICsKPiArCS8qIFRDUiAqLwo+ICsJcmVnIHw9IChBUk1fTFBBRV9UQ1JfU0hfSVMgPDwgQVJN
X0xQQUVfVENSX1NIMV9TSElGVCkgfAo+ICsJICAgICAgKEFSTV9MUEFFX1RDUl9SR05fV0JXQSA8
PCBBUk1fTFBBRV9UQ1JfSVJHTjFfU0hJRlQpIHwKPiArCSAgICAgIChBUk1fTFBBRV9UQ1JfUkdO
X1dCV0EgPDwgQVJNX0xQQUVfVENSX09SR04xX1NISUZUKTsKPiArCj4gKwlzd2l0Y2ggKEFSTV9M
UEFFX0dSQU5VTEUoZGF0YSkpIHsKPiArCWNhc2UgU1pfNEs6Cj4gKwkJcmVnIHw9IEFSTV9MUEFF
X1RDUl9URzFfNEs7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIFNaXzE2SzoKPiArCQlyZWcgfD0gQVJN
X0xQQUVfVENSX1RHMV8xNks7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIFNaXzY0SzoKPiArCQlyZWcg
fD0gQVJNX0xQQUVfVENSX1RHMV82NEs7Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwo+ICsJcmVnIHw9
ICg2NFVMTCAtIGNmZy0+aWFzKSA8PCBBUk1fTFBBRV9UQ1JfVDFTWl9TSElGVDsKPiArCj4gKwlz
d2l0Y2ggKHNlcCkgewo+ICsJY2FzZSAzMToKPiArCQlyZWcgfD0gQVJNX0xQQUVfVENSX1NFUF8z
MTsKPiArCQlicmVhazsKPiArCWNhc2UgMzU6Cj4gKwkJcmVnIHw9IEFSTV9MUEFFX1RDUl9TRVBf
MzU7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIDM5Ogo+ICsJCXJlZyB8PSBBUk1fTFBBRV9UQ1JfU0VQ
XzM5Owo+ICsJCWJyZWFrOwo+ICsJY2FzZSA0MToKPiArCQlyZWcgfD0gQVJNX0xQQUVfVENSX1NF
UF80MTsKPiArCQlicmVhazsKPiArCWNhc2UgNDM6Cj4gKwkJcmVnIHw9IEFSTV9MUEFFX1RDUl9T
RVBfNDM7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIDQ4Ogo+ICsJCXJlZyB8PSBBUk1fTFBBRV9UQ1Jf
U0VQX1VQU1RSRUFNOwo+ICsJCWJyZWFrOwo+ICsJfQo+ICsKPiArCWNmZy0+YXJtX2xwYWVfczFf
Y2ZnLnRjciA9IHJlZzsKPiArCj4gKwkvKiBBbGxvY2F0ZSB0aGUgVFRCUjEgcGFnZXRhYmxlICov
Cj4gKwlkYXRhLT5wZ2RbMV0gPSBfX2FybV9scGFlX2FsbG9jX3BhZ2VzKGRhdGEtPnBnZF9zaXpl
LCBHRlBfS0VSTkVMLCBjZmcpOwo+ICsJaWYgKCFkYXRhLT5wZ2RbMV0pCj4gKwkJZ290byBvdXRf
ZnJlZV9kYXRhOwo+ICsKPiArCS8qIE92ZXJyaWRlIHRoZSBkYXRhIG9wcyB3aXRoIHNwbGl0IHRh
YmxlIHNwZWNpZmljIG9wcyAqLwo+ICsJZGF0YS0+aW9wLm9wcyA9IChzdHJ1Y3QgaW9fcGd0YWJs
ZV9vcHMpIHsKPiArCQkubWFwCQk9IGFybV9scGFlX3NwbGl0X21hcCwKPiArCQkudW5tYXAJCT0g
YXJtX2xwYWVfc3BsaXRfdW5tYXAsCj4gKwkJLmlvdmFfdG9fcGh5cwk9IGFybV9scGFlX3NwbGl0
X2lvdmFfdG9fcGh5cywKPiArCX07Cj4gKwo+ICsJLyoKPiArCSAqIHJlbWVtYmVyIHRoZSBzaWdu
IGV4dGVuc2lvbiBiaXQsIHdlJ2xsIG5lZWQgaXQgbGF0ZXIgdG8gZmlndXJlIG91dAo+ICsJICog
d2hpY2ggcGFnZXRhYmxlIHRvIHVzZQo+ICsJICovCj4gKwlkYXRhLT5zZXAgPSBzZXA7Cj4gKwo+
ICsJLyogRW5zdXJlIHRoZSBlbXB0eSBwZ2QgaXMgdmlzaWJsZSBiZWZvcmUgYW55IGFjdHVhbCBU
VEJSIHdyaXRlICovCj4gKwl3bWIoKTsKPiArCj4gKwljZmctPmFybV9scGFlX3MxX2NmZy50dGJy
WzFdID0gdmlydF90b19waHlzKGRhdGEtPnBnZFsxXSk7Cj4gICAJcmV0dXJuICZkYXRhLT5pb3A7
Cj4gICAKPiAgIG91dF9mcmVlX2RhdGE6Cj4gKwlfX2FybV9scGFlX2ZyZWVfcGFnZXMoZGF0YS0+
cGdkWzBdLCBkYXRhLT5wZ2Rfc2l6ZSwgY2ZnKTsKPiAgIAlrZnJlZShkYXRhKTsKPiAgIAlyZXR1
cm4gTlVMTDsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIHN0cnVjdCBpb19wZ3RhYmxlICoKPiArYXJt
XzY0X2xwYWVfYWxsb2NfcGd0YWJsZV9zMShzdHJ1Y3QgaW9fcGd0YWJsZV9jZmcgKmNmZywgdm9p
ZCAqY29va2llKQo+ICt7Cj4gKwlzdHJ1Y3QgYXJtX2xwYWVfaW9fcGd0YWJsZSAqZGF0YTsKPiAr
Cj4gKwlkYXRhID0gX2FybV82NF9scGFlX2FsbG9jX3BndGFibGVfczEoY2ZnKTsKPiArCWlmICgh
ZGF0YSkKPiArCQlyZXR1cm4gTlVMTDsKPiArCj4gKwlyZXR1cm4gJmRhdGEtPmlvcDsKPiArfQo+
ICsKPiArc3RhdGljIHN0cnVjdCBpb19wZ3RhYmxlICoKPiAgIGFybV82NF9scGFlX2FsbG9jX3Bn
dGFibGVfczIoc3RydWN0IGlvX3BndGFibGVfY2ZnICpjZmcsIHZvaWQgKmNvb2tpZSkKPiAgIHsK
PiAgIAl1NjQgcmVnLCBzbDsKPiBAQCAtOTYwLDE1ICsxMTY3LDE1IEBAIGFybV82NF9scGFlX2Fs
bG9jX3BndGFibGVfczIoc3RydWN0IGlvX3BndGFibGVfY2ZnICpjZmcsIHZvaWQgKmNvb2tpZSkK
PiAgIAljZmctPmFybV9scGFlX3MyX2NmZy52dGNyID0gcmVnOwo+ICAgCj4gICAJLyogQWxsb2Nh
dGUgcGdkIHBhZ2VzICovCj4gLQlkYXRhLT5wZ2QgPSBfX2FybV9scGFlX2FsbG9jX3BhZ2VzKGRh
dGEtPnBnZF9zaXplLCBHRlBfS0VSTkVMLCBjZmcpOwo+IC0JaWYgKCFkYXRhLT5wZ2QpCj4gKwlk
YXRhLT5wZ2RbMF0gPSBfX2FybV9scGFlX2FsbG9jX3BhZ2VzKGRhdGEtPnBnZF9zaXplLCBHRlBf
S0VSTkVMLCBjZmcpOwo+ICsJaWYgKCFkYXRhLT5wZ2RbMF0pCj4gICAJCWdvdG8gb3V0X2ZyZWVf
ZGF0YTsKPiAgIAo+ICAgCS8qIEVuc3VyZSB0aGUgZW1wdHkgcGdkIGlzIHZpc2libGUgYmVmb3Jl
IGFueSBhY3R1YWwgVFRCUiB3cml0ZSAqLwo+ICAgCXdtYigpOwo+ICAgCj4gICAJLyogVlRUQlIg
Ki8KPiAtCWNmZy0+YXJtX2xwYWVfczJfY2ZnLnZ0dGJyID0gdmlydF90b19waHlzKGRhdGEtPnBn
ZCk7Cj4gKwljZmctPmFybV9scGFlX3MyX2NmZy52dHRiciA9IHZpcnRfdG9fcGh5cyhkYXRhLT5w
Z2RbMF0pOwo+ICAgCXJldHVybiAmZGF0YS0+aW9wOwo+ICAgCj4gICBvdXRfZnJlZV9kYXRhOgo+
IEBAIC0xMDQxLDYgKzEyNDgsMTEgQEAgc3RydWN0IGlvX3BndGFibGVfaW5pdF9mbnMgaW9fcGd0
YWJsZV9hcm1fNjRfbHBhZV9zMV9pbml0X2ZucyA9IHsKPiAgIAkuZnJlZQk9IGFybV9scGFlX2Zy
ZWVfcGd0YWJsZSwKPiAgIH07Cj4gICAKPiArc3RydWN0IGlvX3BndGFibGVfaW5pdF9mbnMgaW9f
cGd0YWJsZV9hcm1fNjRfbHBhZV9zcGxpdF9zMV9pbml0X2ZucyA9IHsKPiArCS5hbGxvYwk9IGFy
bV82NF9scGFlX2FsbG9jX3BndGFibGVfc3BsaXRfczEsCj4gKwkuZnJlZQk9IGFybV9scGFlX2Zy
ZWVfcGd0YWJsZSwKPiArfTsKPiArCj4gICBzdHJ1Y3QgaW9fcGd0YWJsZV9pbml0X2ZucyBpb19w
Z3RhYmxlX2FybV82NF9scGFlX3MyX2luaXRfZm5zID0gewo+ICAgCS5hbGxvYwk9IGFybV82NF9s
cGFlX2FsbG9jX3BndGFibGVfczIsCj4gICAJLmZyZWUJPSBhcm1fbHBhZV9mcmVlX3BndGFibGUs
Cj4gQEAgLTEwOTUsOSArMTMwNyw5IEBAIHN0YXRpYyB2b2lkIF9faW5pdCBhcm1fbHBhZV9kdW1w
X29wcyhzdHJ1Y3QgaW9fcGd0YWJsZV9vcHMgKm9wcykKPiAgIAo+ICAgCXByX2VycigiY2ZnOiBw
Z3NpemVfYml0bWFwIDB4JWx4LCBpYXMgJXUtYml0XG4iLAo+ICAgCQljZmctPnBnc2l6ZV9iaXRt
YXAsIGNmZy0+aWFzKTsKPiAtCXByX2VycigiZGF0YTogJWQgbGV2ZWxzLCAweCV6eCBwZ2Rfc2l6
ZSwgJWx1IHBnX3NoaWZ0LCAlbHUgYml0c19wZXJfbGV2ZWwsIHBnZCBAICVwXG4iLAo+ICsJcHJf
ZXJyKCJkYXRhOiAlZCBsZXZlbHMsIDB4JXp4IHBnZF9zaXplLCAlbHUgcGdfc2hpZnQsICVsdSBi
aXRzX3Blcl9sZXZlbCwgcGdkIEAgJXAgJXBcbiIsCj4gICAJCWRhdGEtPmxldmVscywgZGF0YS0+
cGdkX3NpemUsIGRhdGEtPnBnX3NoaWZ0LAo+IC0JCWRhdGEtPmJpdHNfcGVyX2xldmVsLCBkYXRh
LT5wZ2QpOwo+ICsJCWRhdGEtPmJpdHNfcGVyX2xldmVsLCBkYXRhLT5wZ2RbMF0sIGRhdGEtPnBn
ZFsxXSk7Cj4gICB9Cj4gICAKPiAgICNkZWZpbmUgX19GQUlMKG9wcywgaSkJKHsJCQkJCQlcCj4g
QEAgLTExMTIsNiArMTMyNCw3IEBAIHN0YXRpYyBpbnQgX19pbml0IGFybV9scGFlX3J1bl90ZXN0
cyhzdHJ1Y3QgaW9fcGd0YWJsZV9jZmcgKmNmZykKPiAgIAlzdGF0aWMgY29uc3QgZW51bSBpb19w
Z3RhYmxlX2ZtdCBmbXRzW10gPSB7Cj4gICAJCUFSTV82NF9MUEFFX1MxLAo+ICAgCQlBUk1fNjRf
TFBBRV9TMiwKPiArCQlBUk1fNjRfTFBBRV9TUExJVF9TMSwKPiAgIAl9Owo+ICAgCj4gICAJaW50
IGksIGo7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW9tbXUvaW8tcGd0YWJsZS5jIGIvZHJpdmVy
cy9pb21tdS9pby1wZ3RhYmxlLmMKPiBpbmRleCBjZWQ1M2U1Li5lZDE5ODVmIDEwMDY0NAo+IC0t
LSBhL2RyaXZlcnMvaW9tbXUvaW8tcGd0YWJsZS5jCj4gKysrIGIvZHJpdmVycy9pb21tdS9pby1w
Z3RhYmxlLmMKPiBAQCAtMjAsNiArMjAsNyBAQCBpb19wZ3RhYmxlX2luaXRfdGFibGVbSU9fUEdU
QUJMRV9OVU1fRk1UU10gPSB7Cj4gICAJW0FSTV82NF9MUEFFX1MxXSA9ICZpb19wZ3RhYmxlX2Fy
bV82NF9scGFlX3MxX2luaXRfZm5zLAo+ICAgCVtBUk1fNjRfTFBBRV9TMl0gPSAmaW9fcGd0YWJs
ZV9hcm1fNjRfbHBhZV9zMl9pbml0X2ZucywKPiAgIAlbQVJNX01BTElfTFBBRV0gPSAmaW9fcGd0
YWJsZV9hcm1fbWFsaV9scGFlX2luaXRfZm5zLAo+ICsJW0FSTV82NF9MUEFFX1NQTElUX1MxXSA9
ICZpb19wZ3RhYmxlX2FybV82NF9scGFlX3NwbGl0X3MxX2luaXRfZm5zLAo+ICAgI2VuZGlmCj4g
ICAjaWZkZWYgQ09ORklHX0lPTU1VX0lPX1BHVEFCTEVfQVJNVjdTCj4gICAJW0FSTV9WN1NdID0g
JmlvX3BndGFibGVfYXJtX3Y3c19pbml0X2ZucywKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51
eC9pby1wZ3RhYmxlLmggYi9pbmNsdWRlL2xpbnV4L2lvLXBndGFibGUuaAo+IGluZGV4IGI1YTQ1
MGEuLjJlZDBlNmEgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9saW51eC9pby1wZ3RhYmxlLmgKPiAr
KysgYi9pbmNsdWRlL2xpbnV4L2lvLXBndGFibGUuaAo+IEBAIC0xMCw2ICsxMCw3IEBAIGVudW0g
aW9fcGd0YWJsZV9mbXQgewo+ICAgCUFSTV8zMl9MUEFFX1MxLAo+ICAgCUFSTV8zMl9MUEFFX1My
LAo+ICAgCUFSTV82NF9MUEFFX1MxLAo+ICsJQVJNXzY0X0xQQUVfU1BMSVRfUzEsCj4gICAJQVJN
XzY0X0xQQUVfUzIsCj4gICAJQVJNX1Y3UywKPiAgIAlBUk1fTUFMSV9MUEFFLAo+IEBAIC0yMTEs
NiArMjEyLDcgQEAgZXh0ZXJuIHN0cnVjdCBpb19wZ3RhYmxlX2luaXRfZm5zIGlvX3BndGFibGVf
YXJtXzMyX2xwYWVfczFfaW5pdF9mbnM7Cj4gICBleHRlcm4gc3RydWN0IGlvX3BndGFibGVfaW5p
dF9mbnMgaW9fcGd0YWJsZV9hcm1fMzJfbHBhZV9zMl9pbml0X2ZuczsKPiAgIGV4dGVybiBzdHJ1
Y3QgaW9fcGd0YWJsZV9pbml0X2ZucyBpb19wZ3RhYmxlX2FybV82NF9scGFlX3MxX2luaXRfZm5z
Owo+ICAgZXh0ZXJuIHN0cnVjdCBpb19wZ3RhYmxlX2luaXRfZm5zIGlvX3BndGFibGVfYXJtXzY0
X2xwYWVfczJfaW5pdF9mbnM7Cj4gK2V4dGVybiBzdHJ1Y3QgaW9fcGd0YWJsZV9pbml0X2ZucyBp
b19wZ3RhYmxlX2FybV82NF9scGFlX3NwbGl0X3MxX2luaXRfZm5zOwo+ICAgZXh0ZXJuIHN0cnVj
dCBpb19wZ3RhYmxlX2luaXRfZm5zIGlvX3BndGFibGVfYXJtX3Y3c19pbml0X2ZuczsKPiAgIGV4
dGVybiBzdHJ1Y3QgaW9fcGd0YWJsZV9pbml0X2ZucyBpb19wZ3RhYmxlX2FybV9tYWxpX2xwYWVf
aW5pdF9mbnM7Cj4gICAKPiAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KRnJlZWRyZW5vIG1haWxpbmcgbGlzdApGcmVlZHJlbm9AbGlzdHMuZnJlZWRlc2t0
b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZnJl
ZWRyZW5v
